# === 数据集与标签（Kaggle Airline: departure delay, minutes）===
# 请先将 airline.arff 或 airline.csv 放在 ./data/airline/airline.arff（或自行调整路径）
# 该数据来自 Kaggle「Airline on-time performance」，包含连续列 dep_delay（起飞延误分钟）
DATA_PATH: "../data/airlines_train_regression_1000000.arff"

# 这是“连续标签二值化”场景：按美国交通部常用标准，延误 > 15 分钟视为正类
CONT_LABEL: "DepDelay"
CONT_THRESH: 15
CONT_OP: ">"

# === 划分比例 ===
TEST_SIZE: 0.30
VAL_SIZE: 0.30
SEED: 42

# === 特征分层（互信息排序 + 60/80/100）===
LEVEL_PCTS: [0.6, 0.8, 1.0]
RANKER: "mi"

# === KWB 参数 ===
KWB_K: 6
KWB_use_faiss: true            # 是否启用 FAISS 加速后验（环境不支持时自动降级）
KWB_faiss_gpu: true            # 是否使用 GPU 版 FAISS（自动检测可用 GPU）
# === GWB 参数 ===
GWB_K: 6
GWB_mode: "epanechnikov"     # mode: gaussian | epanechnikov | triangular | exponential
GWB_bandwidth: 0.8            # 带宽 h：特征已缩放到[0,1]时可先尝试 0.5~1.0
GWB_use_faiss: true           # 是否启用 FAISS（若环境不支持会自动降级并提示）
GWB_faiss_gpu: true           # 是否将 FAISS 推到 GPU（自动检测可用 GPU）

# === S3WD（严格按论文）===
S3_c1: 0.37
S3_c2: 0.63
S3_xi_min: 0.10
S3_theta_pos: 0.9
S3_theta_neg: 0.1
S3_penalty_large: 1000000.0
S3_gamma_last: true
S3_gap: 0.02
S3_sigma: 3.0                 # 后悔厌恶系数
S3_regret_mode: utility       # 新增：utility 或 rate

# === PSO 超参 ===
# PSO算法的参数配置
PSO_particles: 20    # 粒子群中粒子的数量
PSO_iters: 20       # 粒子群算法的最大迭代次数
PSO_w_max: 0.9       # 惯性权重的最大值
PSO_w_min: 0.4       # 惯性权重的最小值
PSO_c1: 2.8          # 个体学习因子（认知参数）
PSO_c2: 1.3          # 社会学习因子（社会参数）
PSO_seed: 42         # 随机数生成器的种子值，用于保证实验可重复性
PSO_use_gpu: true    # 是否在 GPU 上运行 PSO（依赖 CuPy，自动检测环境）

# === v02 · 分桶 / 参考元组 / 相似度 / 阈值 ===
BUCKET:
  keys: [UniqueCarrier, Origin, Dest, dep_hour]
  min_bucket: 500
  backoff: [[UniqueCarrier, Origin, Dest], [Origin, Dest], [Origin]]

REF_TUPLE:
  topk_per_class: 256
  pos_quantile: 0.7
  keep_history_ratio: 0.3
  use_gwb_weight: true

SIMILARITY:
  kernel: rbf
  sigma: 0.5
  cat_weights: {carrier: 0.4, origin: 0.2, dest: 0.2, dow: 0.1, month: 0.1}
  combine: product
  mix_alpha: 0.7

MEASURE:
  objective: expected_cost
  costs: {c_fn: 1.0, c_fp: 0.4, c_bnd: 0.2}
  grid: {alpha: [0.55, 0.9, 0.02], beta: [0.05, 0.45, 0.02]}
  constraints: {keep_gap: 0.05, min_pos_coverage: 0.02, bnd_cap: 0.35}

SMOOTH:
  ema_alpha: 0.6
  step_cap: {alpha: 0.08, beta: 0.08}

DRIFT:
  method: kswin
  window_size: 512
  stat_size: 128
  psi_thresholds: {warn: 0.1, alert: 0.25}
  tv_thresholds: {warn: 0.1, alert: 0.2}
  posrate_shift: {warn: 0.05, alert: 0.10}
  perf_drop: {warn: 0.10, alert: 0.20}
  debounce_windows: 3
  actions:
    S1: {sigma_factor: [1.2, 0.85], redo_threshold: true}
    S2: {rebuild_ref_tuple: true, keep_history_ratio: 0.3, redo_threshold: true}
    S3:
      rebuild_ref_tuple: true
      rebuild_gwb_index: true
      keep_history_ratio: 0.3
      tighten: {keep_gap: 0.08, bnd_cap: 0.25, step_cap: 0.05}
      cooldown_windows: 3

SWITCH:
  enable_ref_tuple: true
  enable_pso: false
